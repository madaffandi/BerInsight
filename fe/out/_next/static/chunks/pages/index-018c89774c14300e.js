(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9066)}])},9066:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return g}});var t=s(5893),i=s(7294),l=s(9008),n=s.n(l),r=s(5152),c=s.n(r),o=s(3148);let d=!1,h=()=>{d||(o.kL.register(o.uw,o.f$,o.od,o.jn,o.ZL,o.Dx,o.u,o.De,o.qi),d=!0)};c()(()=>s.e(495).then(s.bind(s,6495)).then(e=>e.Line),{loadableGenerated:{webpack:()=>[null]},ssr:!1});let u=c()(()=>s.e(495).then(s.bind(s,6495)).then(e=>e.Bar),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),m=c()(()=>s.e(495).then(s.bind(s,6495)).then(e=>e.Doughnut),{loadableGenerated:{webpack:()=>[null]},ssr:!1}),p=e=>{let{words:a}=e;if(!a||0===a.length)return(0,t.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#888"},children:"No keywords available. Try adjusting filters."});let s=Math.max(...a.map(e=>e.value)),i=Math.min(...a.map(e=>e.value)),l=["#9333ea","#c084fc","#f59e0b","#fbbf24","#10b981","#34d399","#06b6d4","#ec4899"],n=a.slice(0,30);return(0,t.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",padding:"15px",justifyContent:"center",alignItems:"center",maxHeight:"350px",overflow:"auto"},children:n.map((e,a)=>{let n=(e.value-i)/(s-i||1),r=l[a%l.length];return(0,t.jsx)("span",{style:{fontSize:"".concat(14+18*n,"px"),color:r,fontWeight:"600",padding:"3px 8px",cursor:"pointer",transition:"all 0.2s ease",borderRadius:"4px",display:"inline-block",lineHeight:"1.4"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.backgroundColor="".concat(r,"20")},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.backgroundColor="transparent"},title:"".concat(e.text,": ").concat(e.value," mentions"),children:e.text},"".concat(e.text,"-").concat(a))})})};class x extends i.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,a){console.error("WordCloud error:",e,a)}render(){return this.state.hasError?(0,t.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#ef4444"},children:"Unable to display word cloud. Please refresh the page."}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}function g(){let[e,a]=(0,i.useState)(!1),[s,l]=(0,i.useState)(null),[r,c]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1),[g,j]=(0,i.useState)(!0),[v,b]=(0,i.useState)(""),[N,f]=(0,i.useState)(""),[y,C]=(0,i.useState)("all"),[w,k]=(0,i.useState)("all"),[D,S]=(0,i.useState)("all"),[M,A]=(0,i.useState)("all");(0,i.useEffect)(()=>{h(),a(!0)},[]);let I=(0,i.useMemo)(()=>r&&r.items?r.items.filter(e=>(!v||!e.date||!(e.date<v))&&(!N||!e.date||!(e.date>N))&&("all"===y||e.product===y)&&("all"===w||e.channel===w)&&("all"===D||e.social_media===D)&&("all"===M||e.sentiment===M)):[],[r,v,N,y,w,D,M]),P=(0,i.useMemo)(()=>{let e={YouTube:0,Instagram:0,Twitter:0,Facebook:0,"Apple AppStore":0,"Google Playstore":0};return I.forEach(a=>{a.social_media&&e.hasOwnProperty(a.social_media)&&e[a.social_media]++}),e},[I]),F=(0,i.useMemo)(()=>{let e={};return I.forEach(a=>{a.product&&(e[a.product]=(e[a.product]||0)+1)}),e},[I]),E=(0,i.useMemo)(()=>{let e={};return I.forEach(a=>{a.channel&&(e[a.channel]=(e[a.channel]||0)+1)}),e},[I]),B=(0,i.useMemo)(()=>{let e={positive:0,neutral:0,negative:0};return I.forEach(a=>{var s;let t=null===(s=a.sentiment)||void 0===s?void 0:s.toLowerCase();"positive"===t?e.positive++:"negative"===t?e.negative++:e.neutral++}),e},[I]),T=(0,i.useMemo)(()=>({labels:["YouTube","Instagram","Twitter","Facebook","AppStore","Playstore"],datasets:[{label:"Comments/Complaints",data:[P.YouTube,P.Instagram,P.Twitter,P.Facebook,P["Apple AppStore"],P["Google Playstore"]],backgroundColor:["rgba(255, 0, 0, 0.8)","rgba(225, 48, 108, 0.8)","rgba(29, 161, 242, 0.8)","rgba(24, 119, 242, 0.8)","rgba(0, 0, 0, 0.8)","rgba(52, 168, 83, 0.8)"]}]}),[P]),R=(0,i.useMemo)(()=>{let e=["BRImo","Card","Qlola","Loan","Simpedes","Britama","Deposito"];return{labels:e,datasets:[{data:e.map(e=>F[e]||0),backgroundColor:["#0047BA","#FF6B35","#F7B801","#00B4D8","#7209B7","#4CC9F0","#06FFA5"]}]}},[F]),_=(0,i.useMemo)(()=>{let e=["BRImo","BRILink","CERIA","Qlola","MMS","Sabrina"],a=["rgba(0, 71, 186, 0.8)","rgba(255, 107, 53, 0.8)","rgba(247, 184, 1, 0.8)","rgba(0, 180, 216, 0.8)","rgba(114, 9, 183, 0.8)","rgba(76, 201, 240, 0.8)"],s=a.map(e=>e.replace("0.8","1"));return{labels:e,datasets:[{label:"Interactions",data:e.map(e=>E[e]||0),backgroundColor:a,borderColor:s,borderWidth:2}]}},[E]),L=(0,i.useMemo)(()=>({labels:["Positive","Neutral","Negative"],datasets:[{data:[B.positive,B.neutral,B.negative],backgroundColor:["#10b981","#f59e0b","#ef4444"]}]}),[B]),G=(0,i.useMemo)(()=>{if(console.log("Calculating keywordsData from filteredInsights:",(null==I?void 0:I.length)||0),!I||0===I.length)return console.log("No filtered insights available"),[];let e={},a=new Set(["di","dan","yang","untuk","dengan","tidak","pada","dari","ke","ini","itu","adalah","atau","saat","sejak","tapi","fitur","customer","service","bri","bank"]);I.forEach(s=>{(s.title||s.summary)&&"".concat(s.title||""," ").concat(s.summary||"").toLowerCase().split(/\s+/).forEach(s=>{let t=s.replace(/[^a-z0-9]/g,"");t.length>3&&!a.has(t)&&(e[t]=(e[t]||0)+1)})});let s=Object.entries(e).sort((e,a)=>{let[,s]=e,[,t]=a;return t-s}).slice(0,50).map(e=>{let[a,s]=e;return{text:a,value:s}});return console.log("Keywords data generated:",s.length,"keywords"),s.length>0&&console.log("Sample keywords:",s.slice(0,5)),s},[I]),Q=I.length,H=B.positive+B.neutral+B.negative,K=H>0?((5*B.positive+3*B.neutral+1*B.negative)/H).toFixed(1):"0.0",O=H>0?Math.round(B.positive/H*100):0,Y={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Chart Title"}}},z=async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,s=new AbortController,t=setTimeout(()=>s.abort(),a);try{let a=await fetch(e,{signal:s.signal});return clearTimeout(t),a}catch(e){throw clearTimeout(t),e}},W=async()=>{try{let e=await z("".concat("http://localhost:8000","/healthz"));if(e.ok){let a=await e.json();l(a)}}catch(e){console.error("Failed to fetch health status:",e)}},q=async()=>{try{let e=await z("".concat("http://localhost:8000","/insights"));if(e.ok){let a=await e.json();c(a),d(!1)}}catch(e){console.error("Failed to fetch insights, trying fallback:",e);try{let e=await fetch("/fallback.json");if(e.ok){let a=await e.json();c(a),d(!0)}}catch(e){console.error("Fallback also failed:",e)}}};return((0,i.useEffect)(()=>{(async()=>{j(!0),await Promise.all([W(),q()]),j(!1)})()},[]),e)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"BerInsight - Customer Knowledge Analytics"}),(0,t.jsx)("meta",{name:"description",content:"AI-Powered Customer Knowledge Analytics & Social Media Insights"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,t.jsxs)("div",{className:"dashboard",children:[(0,t.jsxs)("header",{className:"dashboard-header",children:[(0,t.jsx)("h1",{children:"BerInsight Customer Knowledge Analytics"}),(0,t.jsx)("p",{children:"AI-Powered Customer Insights & Social Media Analytics"}),(0,t.jsxs)("div",{className:"filter-panel",children:[(0,t.jsxs)("div",{className:"filter-row",children:[(0,t.jsxs)("div",{className:"filter-item",children:[(0,t.jsx)("label",{children:"\uD83D\uDCC5 Start Date:"}),(0,t.jsx)("input",{type:"date",value:v,onChange:e=>b(e.target.value),className:"filter-input"})]}),(0,t.jsxs)("div",{className:"filter-item",children:[(0,t.jsx)("label",{children:"\uD83D\uDCC5 End Date:"}),(0,t.jsx)("input",{type:"date",value:N,onChange:e=>f(e.target.value),className:"filter-input"})]}),(0,t.jsxs)("div",{className:"filter-item",children:[(0,t.jsx)("label",{children:"\uD83D\uDCF1 Product:"}),(0,t.jsxs)("select",{value:y,onChange:e=>C(e.target.value),className:"filter-select",children:[(0,t.jsx)("option",{value:"all",children:"All Products"}),(0,t.jsx)("option",{value:"BRImo",children:"BRImo"}),(0,t.jsx)("option",{value:"Card",children:"Card"}),(0,t.jsx)("option",{value:"Qlola",children:"Qlola"}),(0,t.jsx)("option",{value:"Loan",children:"Loan"}),(0,t.jsx)("option",{value:"Simpedes",children:"Simpedes"}),(0,t.jsx)("option",{value:"Britama",children:"Britama"}),(0,t.jsx)("option",{value:"Deposito",children:"Deposito"})]})]}),(0,t.jsxs)("div",{className:"filter-item",children:[(0,t.jsx)("label",{children:"\uD83C\uDFEA Channel:"}),(0,t.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"filter-select",children:[(0,t.jsx)("option",{value:"all",children:"All Channels"}),(0,t.jsx)("option",{value:"BRImo",children:"BRImo"}),(0,t.jsx)("option",{value:"BRILink",children:"BRILink"}),(0,t.jsx)("option",{value:"CERIA",children:"CERIA"}),(0,t.jsx)("option",{value:"Qlola",children:"Qlola"}),(0,t.jsx)("option",{value:"MMS",children:"MMS"}),(0,t.jsx)("option",{value:"Sabrina",children:"Sabrina"})]})]}),(0,t.jsxs)("div",{className:"filter-item",children:[(0,t.jsx)("label",{children:"\uD83D\uDCFA Social Media:"}),(0,t.jsxs)("select",{value:D,onChange:e=>S(e.target.value),className:"filter-select",children:[(0,t.jsx)("option",{value:"all",children:"All Platforms"}),(0,t.jsx)("option",{value:"YouTube",children:"YouTube"}),(0,t.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,t.jsx)("option",{value:"Twitter",children:"Twitter"}),(0,t.jsx)("option",{value:"Facebook",children:"Facebook"}),(0,t.jsx)("option",{value:"Apple AppStore",children:"Apple AppStore"}),(0,t.jsx)("option",{value:"Google Playstore",children:"Google Playstore"})]})]}),(0,t.jsxs)("div",{className:"filter-item",children:[(0,t.jsx)("label",{children:"\uD83D\uDE0A Sentiment:"}),(0,t.jsxs)("select",{value:M,onChange:e=>A(e.target.value),className:"filter-select",children:[(0,t.jsx)("option",{value:"all",children:"All Sentiments"}),(0,t.jsx)("option",{value:"positive",children:"Positive"}),(0,t.jsx)("option",{value:"neutral",children:"Neutral"}),(0,t.jsx)("option",{value:"negative",children:"Negative"})]})]}),(0,t.jsx)("div",{className:"filter-item",children:(0,t.jsx)("button",{onClick:()=>{b(""),f(""),C("all"),k("all"),S("all"),A("all")},className:"filter-reset-btn",children:"\uD83D\uDD04 Reset Filters"})})]}),(0,t.jsxs)("div",{className:"filter-stats",children:[(0,t.jsx)("strong",{children:"Showing:"})," ",Q," items",(v||N||"all"!==y||"all"!==w||"all"!==D||"all"!==M)&&(0,t.jsx)("span",{className:"filtered-badge",children:"Filtered"})]})]})]}),(0,t.jsxs)("div",{className:"dashboard-grid",children:[(0,t.jsxs)("div",{className:"metrics-row",children:[(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsx)("h3",{children:"Total Feedback"}),(0,t.jsx)("div",{className:"metric-value",children:Q.toLocaleString()}),(0,t.jsx)("div",{className:"metric-change positive",children:"Real-time"})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsx)("h3",{children:"Customer Satisfaction"}),(0,t.jsxs)("div",{className:"metric-value",children:[K,"/5.0"]}),(0,t.jsxs)("div",{className:"metric-change positive",children:[O,"% positive"]})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsx)("h3",{children:"Sentiment Score"}),(0,t.jsxs)("div",{className:"metric-value",children:[O,"%"]}),(0,t.jsx)("div",{className:"metric-change positive",children:"Positive rate"})]}),(0,t.jsxs)("div",{className:"metric-card",children:[(0,t.jsx)("h3",{children:"Data Points"}),(0,t.jsx)("div",{className:"metric-value",children:Object.keys(F).length}),(0,t.jsx)("div",{className:"metric-change neutral",children:"Products"})]})]}),(0,t.jsxs)("div",{className:"analytics-grid",children:[(0,t.jsxs)("div",{className:"chart-container",children:[(0,t.jsx)("h3",{children:"Social Media Feedback"}),(0,t.jsx)(u,{data:T,options:{...Y,plugins:{...Y.plugins,title:{display:!0,text:"Comments by Social Media Platform"},legend:{display:!1}}}})]}),(0,t.jsxs)("div",{className:"chart-container",children:[(0,t.jsx)("h3",{children:"Product Analysis"}),(0,t.jsx)(m,{data:R,options:{...Y,plugins:{...Y.plugins,title:{display:!0,text:"Feedback by Product"}}}})]}),(0,t.jsxs)("div",{className:"chart-container",children:[(0,t.jsx)("h3",{children:"Channel Distribution"}),(0,t.jsx)(u,{data:_,options:{...Y,plugins:{...Y.plugins,title:{display:!0,text:"Interactions by Channel"},legend:{display:!1}}}})]})]}),(0,t.jsxs)("div",{className:"sentiment-keywords-section",children:[(0,t.jsxs)("div",{className:"sentiment-card",children:[(0,t.jsx)("h3",{children:"Sentiment Analysis"}),(0,t.jsxs)("div",{className:"sentiment-grid",children:[(0,t.jsx)("div",{className:"sentiment-chart",children:(0,t.jsx)(m,{data:L,options:{...Y,plugins:{...Y.plugins,title:{display:!1}}}})}),(0,t.jsxs)("div",{className:"sentiment-stats",children:[(0,t.jsxs)("div",{className:"sentiment-item positive",children:[(0,t.jsx)("div",{className:"sentiment-label",children:"Positive"}),(0,t.jsxs)("div",{className:"sentiment-value",children:[B.positive," (",H>0?Math.round(B.positive/H*100):0,"%)"]})]}),(0,t.jsxs)("div",{className:"sentiment-item neutral",children:[(0,t.jsx)("div",{className:"sentiment-label",children:"Neutral"}),(0,t.jsxs)("div",{className:"sentiment-value",children:[B.neutral," (",H>0?Math.round(B.neutral/H*100):0,"%)"]})]}),(0,t.jsxs)("div",{className:"sentiment-item negative",children:[(0,t.jsx)("div",{className:"sentiment-label",children:"Negative"}),(0,t.jsxs)("div",{className:"sentiment-value",children:[B.negative," (",H>0?Math.round(B.negative/H*100):0,"%)"]})]})]})]})]}),(0,t.jsxs)("div",{className:"keywords-card",children:[(0,t.jsx)("h3",{children:"Most Mentioned Keywords"}),(0,t.jsx)("div",{className:"wordcloud-container",children:(0,t.jsx)(x,{children:e?(0,t.jsx)(p,{words:G}):(0,t.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#888"},children:"Initializing..."})})})]})]}),(0,t.jsxs)("div",{className:"ideas-section",children:[(0,t.jsx)("h3",{children:"Highlighted Ideas & Suggestions"}),(0,t.jsxs)("div",{className:"ideas-grid",children:[(0,t.jsxs)("div",{className:"idea-card priority-high",children:[(0,t.jsxs)("div",{className:"idea-header",children:[(0,t.jsx)("span",{className:"idea-badge",children:"High Priority"}),(0,t.jsx)("span",{className:"idea-product",children:"BRImo"})]}),(0,t.jsx)("h4",{children:"Dark Mode Implementation"}),(0,t.jsx)("p",{children:"Multiple users requesting dark mode feature for better night-time usage. High engagement potential."}),(0,t.jsxs)("div",{className:"idea-meta",children:[(0,t.jsx)("span",{children:"\uD83D\uDCF1 45 mentions"}),(0,t.jsx)("span",{children:"⭐ 89% positive"})]})]}),(0,t.jsxs)("div",{className:"idea-card priority-medium",children:[(0,t.jsxs)("div",{className:"idea-header",children:[(0,t.jsx)("span",{className:"idea-badge medium",children:"Medium Priority"}),(0,t.jsx)("span",{className:"idea-product",children:"Card"})]}),(0,t.jsx)("h4",{children:"Biometric Authentication"}),(0,t.jsx)("p",{children:"Customers want fingerprint/face recognition for card transactions to enhance security."}),(0,t.jsxs)("div",{className:"idea-meta",children:[(0,t.jsx)("span",{children:"\uD83D\uDD10 32 mentions"}),(0,t.jsx)("span",{children:"⭐ 92% positive"})]})]}),(0,t.jsxs)("div",{className:"idea-card priority-high",children:[(0,t.jsxs)("div",{className:"idea-header",children:[(0,t.jsx)("span",{className:"idea-badge",children:"High Priority"}),(0,t.jsx)("span",{className:"idea-product",children:"Qlola"})]}),(0,t.jsx)("h4",{children:"Merchant Cashback Program"}),(0,t.jsx)("p",{children:"Request for enhanced cashback rewards at partner merchants to increase usage."}),(0,t.jsxs)("div",{className:"idea-meta",children:[(0,t.jsx)("span",{children:"\uD83D\uDCB0 38 mentions"}),(0,t.jsx)("span",{children:"⭐ 95% positive"})]})]})]})]}),I.length>0&&(0,t.jsxs)("div",{className:"insights-section",children:[(0,t.jsxs)("h2",{children:["Latest Customer Insights (",I.length," items)"]}),(0,t.jsx)("div",{className:"insights-grid",children:I.slice(0,6).map((e,a)=>(0,t.jsxs)("div",{className:"insight-card",children:[(0,t.jsxs)("div",{className:"insight-header",children:[(0,t.jsx)("span",{className:"insight-type",children:e.type}),(0,t.jsx)("span",{className:"insight-sentiment ".concat(e.sentiment||"neutral"),children:e.sentiment||"neutral"})]}),(0,t.jsx)("h4",{children:e.title}),(0,t.jsxs)("p",{className:"insight-source",children:["\uD83D\uDCCD ",e.source]}),(0,t.jsx)("p",{className:"insight-summary",children:e.summary})]},a))})]})]})]})]}):null}}},function(e){e.O(0,[196,480,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);